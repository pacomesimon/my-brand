version: 2.1

workflows:
  on_commit:
    jobs:
      - createREADME

jobs:
  createREADME:
    docker:
      - image: cimg/node:14.13.0
    steps:
      - checkout
      - run:
          name: Install dependencies
          command: cd ./server && npm install
      - run:
          name: Build README.md
          command: cd ./server && npm run createREADME
      - run:
          name: Put a README.md copy in Artifacts
          command: |
            cd ./server && cat README.md > /tmp/README.md;
      - store_artifacts:
          path: /tmp/README.md
          destination: artifact-file